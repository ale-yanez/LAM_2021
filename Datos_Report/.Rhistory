xlab('Años') + ylab('Desembarque (ton)') +
theme(legend.title=element_blank()) +
scale_x_continuous(breaks=round(seq(min(myd_sur$yrs), max(myd_sur$yrs), by = 2),1)) +
scale_y_continuous(breaks=round(seq(0, 4000, by = 500),1)) +
theme_bw() + theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(), axis.text=element_text(size=9),legend.position = 'bottom')
#theme(legend.position = 'bottom', panel.grid.major = element_blank(), axis.text=element_text(size=10))
#theme(panel.background = element_rect(fill = "transparent"),legend.position = 'bottom')
p12
ggsave(p12, file='Figs/Fig10_Desemb_LAmSur.png', width=7.5, height=5, dpi=300)
# Indice de Abundancia Pesquero
p13 <-  ggplot(myd_sur, aes(x=yrs_s))+
geom_point(aes(y= cpue, colour="CPUE Obs"), size = 2, shape = 21)+
geom_errorbar(aes(ymin = obsC95i_s, ymax = obsC95s_s), colour='black', width=0.6) +
scale_colour_manual(name='', values=c('CPUE Obs'='black'), guide='legend') +
guides(colour = guide_legend(override.aes = list(linetype=c(0), shape=c(21)))) +
xlab('Años') + scale_x_continuous(breaks=round(seq(min(yrs_s), 2019, by = 2),1)) +
ylab('Indice Relativo') + scale_y_continuous(breaks=round(seq(0, 3, by = 0.5),1)) +
theme_bw() + theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(), axis.text=element_text(size=8)) +
theme(legend.position = 'bottom')  + theme(legend.title=element_blank())
p13
ggsave(p13, file='Figs/Fig11_CPUE_LAmSur.png', width=7.5, height=5, dpi=300)
#Biomasa Cruceros
p14 <-  ggplot(myd_sur, aes(x=yrs_s))+
geom_point(aes(y= Bcru, colour="Biomasa Crucero"), size = 2, shape = 21) +
geom_errorbar(aes(ymin = obsS95i_s, ymax = obsS95s_s), colour='black', width=0.6) +
scale_colour_manual(name='', values=c('Biomasa Crucero'='black'), guide='legend') +
guides(colour = guide_legend(override.aes = list(linetype=c(0), shape=c(21)))) +
xlab('Años') + scale_x_continuous(breaks=round(seq(min(yrs_s), 2019, by = 3),1)) +
ylab('Biomasa Crucero (t)') + scale_y_continuous(breaks=round(seq(0, 3, by = 0.5),1)) +
theme_bw() + theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(), axis.text=element_text(size=8)) +
theme(legend.position = 'bottom')  + theme(legend.title=element_blank())
p14
ggsave(p14, file='Figs/Fig12_Crucero_LAmSur.png', width=7.5, height=5, dpi=300)
df_prop <- data.frame(c(rep(yrs_s,2)), c(myd_sur$ph, (1-myd_sur$ph)), c(rep('hembras',41), rep(' machos',41)))
names <-  c('yrs', 'Prop', 'Sexo')
colnames(df_prop) <- names
p15 <- ggplot(df_prop, aes(fill=Sexo, y=Prop, x=yrs)) +
geom_bar(stat="identity", position = "fill") +
scale_fill_manual("", values = c("hembras" = "gold2", " machos" = "grey")) +
xlab('Años') + scale_x_continuous(breaks=round(seq(min(yrs_s), 2019, by = 2),1)) +
ylab('Proporción') + scale_y_continuous(breaks=round(seq(0, 1, by = 0.1),1)) +
theme_bw() + theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(), axis.text=element_text(size=8)) +
theme(legend.position = 'bottom')  + theme(legend.title=element_blank())
p15 + annotate("segment", x=1985, xend=2019, y=0.5, yend=0.5, colour="red", linetype="dashed")
ggsave(p15, file='Figs/Fig13_PropSexual_LAmSur.png', width=7.5, height=5, dpi=300)
df5 <- data.frame(dat_sur$ETflom)
names <-  c(tallas_s)
colnames(df5) <- names
df5$yr <- as.factor(yrs_s)
df5 <- df5[-c(1:2, 4:7, 9:15, 22:24), ]
#length(df1[, 34])
d5 <- melt(df5)
#head(d)
colnames(d5) <- c('yr', 'Tallas', 'value')
dfl5 <- data.frame(d5$yr, d5$Tallas, d5$value)
#head(dfl)
colnames(dfl5) <- c('yrs', 'Tallas', 'pobs')
#Plotting
p16 <- ggplot(data=dfl5, aes(x=Tallas, y=pobs)) +
geom_bar(stat="identity", colour='grey') + #xlab('Tallas')
ylab('Proporción') + theme_bw() + theme(legend.position ='none') +
theme(panel.grid.major = element_blank(),panel.grid.minor = element_blank(),axis.text=element_text(size=10))
p16 <- p16 + facet_wrap(~ yrs, dir = 'v') + scale_x_discrete('Tallas', breaks = seq(10, 52, by= 6))# + scale_y_continuous(limits=c(0,0.16))
p16
ggsave(p16, file='Figs/Fig14_CompsFleetM_LAmSur.png', width=7.5, height=5, dpi=300)
df5 <- data.frame(dat_sur$ETflom)
names <-  c(tallas_s)
colnames(df5) <- names
df5$yr <- as.factor(yrs_s)
df5 <- df5[-c(1:2, 4:7, 9:15, 22:24), ]
#length(df1[, 34])
d5 <- melt(df5)
#head(d)
colnames(d5) <- c('yr', 'Tallas', 'value')
dfl5 <- data.frame(d5$yr, d5$Tallas, d5$value)
#head(dfl)
colnames(dfl5) <- c('yrs', 'Tallas', 'pobs')
#Plotting
p16 <- ggplot(data=dfl5, aes(x=Tallas, y=pobs)) +
geom_bar(stat="identity", colour='grey') + #xlab('Tallas')
ylab('Proporción') + theme_bw() + theme(legend.position ='none') +
theme(panel.grid.major = element_blank(),panel.grid.minor = element_blank(),axis.text=element_text(size=7))
p16 <- p16 + facet_wrap(~ yrs, dir = 'v') + scale_x_discrete('Tallas', breaks = seq(10, 52, by= 6))# + scale_y_continuous(limits=c(0,0.16))
p16
ggsave(p16, file='Figs/Fig14_CompsFleetM_LAmSur.png', width=7.5, height=5, dpi=300)
# Hembras Flota Norte
df6 <- data.frame(dat_sur$ETfloh)
names <-  c(tallas_s)
colnames(df6) <- names
df6$yr <- as.factor(yrs_s)
df6 <- df6[-c(1:2, 4:7, 9:15, 22:24), ]
#length(df1[, 34])
d6 <- melt(df6)
#head(d)
colnames(d6) <- c('yr', 'Tallas', 'value')
dfl6 <- data.frame(d6$yr, d6$Tallas, d6$value)
#head(dfl)
colnames(dfl6) <- c('yrs', 'Tallas', 'pobs')
#Plotting
p17 <- ggplot(data=dfl6, aes(x=Tallas, y=pobs)) +
geom_bar(stat="identity", colour='grey') + #xlab('Tallas')
ylab('Proporción') + theme_bw() + theme(legend.position ='none') +
theme(panel.grid.major = element_blank(),panel.grid.minor = element_blank(),axis.text=element_text(size=10))
p17 <- p17 + facet_wrap(~ yrs, dir = 'v') + scale_x_discrete('Tallas', breaks = seq(10, 52, by= 6))# + scale_y_continuous(limits=c(0,0.16))
p17
ggsave(p17, file='Figs/Fig15_CompsFleetH_LAmSur.png', width=7.5, height=5, dpi=300)
df7 <- data.frame(dat_sur$ETcrum)
names <-  c(tallas_s)
colnames(df7) <- names
df7$yr <- as.factor(yrs_s)
df7 <- df7[-c(1:20, 32), ]
#length(df1[, 34])
d7 <- melt(df7)
#head(d)
colnames(d7) <- c('yr', 'Tallas', 'value')
dfl7 <- data.frame(d7$yr, d7$Tallas, d7$value)
#head(dfl)
colnames(dfl7) <- c('yrs', 'Tallas', 'pobs')
#Plotting
p18 <- ggplot(data=dfl7, aes(x=Tallas, y=pobs)) +
geom_bar(stat="identity", colour='grey') + #xlab('Tallas')
ylab('Proporción') + theme_bw() + theme(legend.position ='none') +
theme(panel.grid.major = element_blank(),panel.grid.minor = element_blank(),axis.text=element_text(size=10))
p18 <- p18 + facet_wrap(~ yrs, dir = 'v') + scale_x_discrete('Tallas', breaks = seq(10, 52, by= 6))# + scale_y_continuous(limits=c(0,0.16))
p18
ggsave(p18, file='Figs/Fig16_CompsSurvM_LAmSur.png', width=7.5, height=5, dpi=300)
# Hembras Flota Norte
df6 <- data.frame(dat_sur$ETfloh)
names <-  c(tallas_s)
colnames(df6) <- names
df6$yr <- as.factor(yrs_s)
df6 <- df6[-c(1:2, 4:7, 9:15, 22:24), ]
#length(df1[, 34])
d6 <- melt(df6)
#head(d)
colnames(d6) <- c('yr', 'Tallas', 'value')
dfl6 <- data.frame(d6$yr, d6$Tallas, d6$value)
#head(dfl)
colnames(dfl6) <- c('yrs', 'Tallas', 'pobs')
#Plotting
p17 <- ggplot(data=dfl6, aes(x=Tallas, y=pobs)) +
geom_bar(stat="identity", colour='grey') + #xlab('Tallas')
ylab('Proporción') + theme_bw() + theme(legend.position ='none') +
theme(panel.grid.major = element_blank(),panel.grid.minor = element_blank(),axis.text=element_text(size=7))
p17 <- p17 + facet_wrap(~ yrs, dir = 'v') + scale_x_discrete('Tallas', breaks = seq(10, 52, by= 6))# + scale_y_continuous(limits=c(0,0.16))
p17
ggsave(p17, file='Figs/Fig15_CompsFleetH_LAmSur.png', width=7.5, height=5, dpi=300)
df7 <- data.frame(dat_sur$ETcrum)
names <-  c(tallas_s)
colnames(df7) <- names
df7$yr <- as.factor(yrs_s)
df7 <- df7[-c(1:20, 32), ]
#length(df1[, 34])
d7 <- melt(df7)
#head(d)
colnames(d7) <- c('yr', 'Tallas', 'value')
dfl7 <- data.frame(d7$yr, d7$Tallas, d7$value)
#head(dfl)
colnames(dfl7) <- c('yrs', 'Tallas', 'pobs')
#Plotting
p18 <- ggplot(data=dfl7, aes(x=Tallas, y=pobs)) +
geom_bar(stat="identity", colour='grey') + #xlab('Tallas')
ylab('Proporción') + theme_bw() + theme(legend.position ='none') +
theme(panel.grid.major = element_blank(),panel.grid.minor = element_blank(),axis.text=element_text(size=7))
p18 <- p18 + facet_wrap(~ yrs, dir = 'v') + scale_x_discrete('Tallas', breaks = seq(10, 52, by= 6))# + scale_y_continuous(limits=c(0,0.16))
p18
ggsave(p18, file='Figs/Fig16_CompsSurvM_LAmSur.png', width=7.5, height=5, dpi=300)
df8 <- data.frame(dat_sur$ETcruh)
names <-  c(tallas_s)
colnames(df8) <- names
df8$yr <- as.factor(yrs_s)
df8 <- df8[-c(1:20, 32), ]
#length(df1[, 34])
d8 <- melt(df8)
#head(d)
colnames(d8) <- c('yr', 'Tallas', 'value')
dfl8 <- data.frame(d8$yr, d8$Tallas, d8$value)
#head(dfl)
colnames(dfl8) <- c('yrs', 'Tallas', 'pobs')
#Plotting
p19 <- ggplot(data=dfl8, aes(x=Tallas, y=pobs)) +
geom_bar(stat="identity", colour='grey') + #xlab('Tallas')
ylab('Proporción') + theme_bw() + theme(legend.position ='none') +
theme(panel.grid.major = element_blank(),panel.grid.minor = element_blank(),axis.text=element_text(size=7))
p19 <- p19 + facet_wrap(~ yrs, dir = 'v') + scale_x_discrete('Tallas', breaks = seq(10, 52, by= 6))# + scale_y_continuous(limits=c(0,0.16))
p19
ggsave(p19, file='Figs/Fig17_CompsSurvH_LAmSur.png', width=7.5, height=5, dpi=300)
# Pesos Medios
Wt_mS <- dat_sur$Wt_m
Wt_hS <- dat_sur$Wt_h
#Plotting Flota
p20 <- ggplot(NULL, aes(x = tallas_s)) +
geom_line(aes(y = Wt_mS, colour = 'Machos', linetype = 'Machos')) +
geom_line(aes(y = Wt_hS, colour = 'Hembras', linetype = 'Hembras')) +
scale_color_manual(name = '', values = c('gold2', 'grey')) +      #, limits = c('Machos', 'Hembras'), breaks = c('Machos', 'Hembras')) +
scale_linetype_manual(name = '', values = c('solid', 'solid'))    # , limits = c('Machos', 'Hembras'), breaks = c('Machos', 'Hembras'))
p20 <- p20 + theme_bw() +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(), axis.text=element_text(size=8)) +
theme(legend.title=element_blank()) + theme(legend.position = 'bottom') + theme(legend.text=element_text(size=12)) +
ylab('Peso (g)') + scale_x_continuous('Tallas (mm)', breaks = seq(10, 52, by= 6)) #+ ggtitle('Flota')
p20
ggsave(p20, file='Figs/Fig18_Wm_LAmSur.png', width=7.5, height=5, dpi=300)
# ojiva de madurez
mat <- dat_nor$Msex
# Plotting
p21 <- ggplot(NULL, aes(x = tallas_n)) +
#geom_point(aes(y = PropObs, colour = 'Proporción Observada'), size = 1.7, shape = 21, fill = 'lightcyan') +
geom_line(aes(y = mat, colour = 'Ojiva de Madurez')) +
xlab('Longitud Cefalotoráxica (mm)') + scale_x_continuous(breaks=round(seq(10, 52, by = 6),1)) +
ylab('Proporción de Madurez') + theme_bw() +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(), axis.text=element_text(size=8)) +
theme(legend.position = 'bottom') + theme(legend.title=element_blank())
p21 <- p21 + annotate("segment", x=10, xend=25.63, y=0.5, yend=0.5, colour="black", linetype='dotted') +
annotate("segment", x=25.63, xend=25.63, y=0, yend=0.5, colour="black", linetype='dotted') +
annotate("text", x=39, y=0.5, label="L50% = 25.63 mm")
p21
ggsave(p21, file='Figs/Fig19_Maturity.png', width=7.5, height=5, dpi=300)
rm(list=ls())
library(stringr)
library(stringr)
rm(list=ls())
library(stringr)
library(knitr)
library(dplyr)
library(ggplot2)
library(ggthemes)
library(R2admb)
library(reshape2)
library(ggpubr)
library(plyr)
#devtools::source_url("https://github.com/ale-yanez/RFunctions/blob/master/multiplot.R?raw=TRUE")
#source('~/Documents/Rwork/Functions/functions.R')
#source('~/Documents/Rwork/Functions/read.report.R')
#dir.1<-'~/Documents/Rwork/IFOP/LAm_2020/Taller_Datos'
#dir.2<-'~/Documents/ADMwork/IFOP/2019/Lama_model/Cons_2003/norte/Lamnor2003'
#dir.3<-'~/Documents/ADMwork/IFOP/2019/Lama_model/Cons_2003/sur/Lamsur2003'
dat1_nor        <- lisread("../STOCK_LAN/input/stock_LAN.dat", sep='/'));
dat1_nor        <- lisread("../STOCK_LAN/input/stock_LAN.dat");
#devtools::source_url("https://github.com/ale-yanez/RFunctions/blob/master/multiplot.R?raw=TRUE")
#source('~/Documents/Rwork/Functions/functions.R')
source('~/Documents/Rwork/Functions/read.report.R')
dat1_nor        <- lisread("../STOCK_LAN/input/stock_LAN.dat");
#devtools::source_url("https://github.com/ale-yanez/RFunctions/blob/master/multiplot.R?raw=TRUE")
source('~/Documents/Rwork/Functions/functions.R')
dat1_nor        <- lisread("../STOCK_LAN/input/stock_LAN.dat");
names(dat1_nor) <- str_trim(names(dat1_nor), side="right")
dat_nor         <- dat1_nor
dat_nor
# Lee datos ZES
# setwd(dir.3)
# dat.file_sur    = "lamsur2003.dat" #Cambiar despues por info actualizada y borrar esto
# dat1_sur        <- lisread(paste(dir.3,dat.file_sur, sep='/'));
dat1_sur        <- lisread("../STOCK_LAS/input/stock_LAS.dat");
names(dat1_sur) <- str_trim(names(dat1_sur), side="right")
dat_sur         <- dat1_sur
# Lee datos ZEN
#setwd(dir.2)
# dat.file_nor    = "lamnor2003.dat" #Cambiar despues por info actualizada y borrar esto
# dat1_nor        <- lisread(paste(dir.2,dat.file_nor, sep='/'));
dat1_nor        <- lisread("../STOCK_LAN/input/stock_LAN.dat");
names(dat1_nor) <- str_trim(names(dat1_nor), side="right")
dat_nor         <- dat1_nor
# Lee datos ZES
# setwd(dir.3)
# dat.file_sur    = "lamsur2003.dat" #Cambiar despues por info actualizada y borrar esto
# dat1_sur        <- lisread(paste(dir.3,dat.file_sur, sep='/'));
dat1_sur        <- lisread("../STOCK_LAS/input/stock_LAS.dat");
names(dat1_sur) <- str_trim(names(dat1_sur), side="right")
dat_sur         <- dat1_sur
# DATOS NORTE
# ============================================================================== #
yrs_n  <- dat_nor$Ind[,1]
years_n  <- dat_nor$Ind[,1]
nyrs_n <- length(yrs_n)
age_n    <- dat_nor$edades
nage_n   <- dat_nor$nages
ntalla_n  <- dat_nor$ntallas
tallas_n <- dat_nor$tallas
#Indices
mydat_nor <-  dat_nor$Ind[,c(1,2,3,4,5)] ; mydat_nor[mydat_nor==0] <- NA
myd_nor   <-  data.frame(mydat_nor)
myd_nor$periodo <- c(rep('B', 16), rep('C',19))
myd_nor
#Indices
mydat_nor <-  dat_nor$Ind[,c(1,2,3,4,5)] ; mydat_nor[mydat_nor==0] <- NA
mydat_nor
myd_nor   <-  data.frame(mydat_nor)
myd_nor
mydat_nor
myd_nor
myd_nor
myd_nor
myd_nor
myd_nor
myd_nor
myd_nor$X1
length(myd_nor$X1)
myd_nor$periodo <- c(rep('B', 16), rep('C',20))
myd_nor$periodo <- c(rep('B', 16), rep('C',20))
myd_nor$periodo <- c(rep('B', 21), rep('C',20))
myd_nor$periodo <- c(rep('B', 22), rep('C',20))
myd_nor
View(myd_nor)
myd_nor$periodo <- c(rep('A', 22), rep('B',20))
names <-  c('yrs', 'desem','cpue','Bcru','ph','Periodo')
colnames(myd_nor) <- names
#Observado
cpue_n <- myd_nor$cpue; cpue_n[cpue_n <= 0.01]   <-NA
Bcru_n <- myd_nor$Bcru ; Bcru_n[Bcru_n <= 1]  <-NA
# Confidence Intervals
cvcpue_n        <- rep(0.15,nyrs_n)
cvBcru_n        <- rep(0.30,nyrs_n)
obsC95i_n <- cpue_n*exp(-1.96*cvcpue_n); obsC95s_n <-cpue_n*exp(1.96*cvcpue_n)
obsS95i_n <- Bcru_n*exp(-1.96*cvBcru_n); obsS95s_n <-Bcru_n*exp(1.96*cvBcru_n)
# DATOS NORTE
# ============================================================================== #
yrs_n  <- dat_nor$Ind[,1]
years_n  <- dat_nor$Ind[,1]
nyrs_n <- length(yrs_n)
age_n    <- dat_nor$edades
nage_n   <- dat_nor$nages
ntalla_n  <- dat_nor$ntallas
tallas_n <- dat_nor$tallas
#Indices
mydat_nor <-  dat_nor$Ind[,c(1,2,3,4,5)] ; mydat_nor[mydat_nor==0] <- NA
myd_nor   <-  data.frame(mydat_nor)
myd_nor$periodo <- c(rep('A', 22), rep('B',20))
names <-  c('yrs', 'desem','cpue','Bcru','ph','Periodo')
colnames(myd_nor) <- names
#Observado
cpue_n <- myd_nor$cpue; cpue_n[cpue_n <= 0.01]   <-NA
Bcru_n <- myd_nor$Bcru ; Bcru_n[Bcru_n <= 1]  <-NA
# Confidence Intervals
cvcpue_n        <- rep(0.15,nyrs_n)
cvBcru_n        <- rep(0.30,nyrs_n)
obsC95i_n <- cpue_n*exp(-1.96*cvcpue_n); obsC95s_n <-cpue_n*exp(1.96*cvcpue_n)
obsS95i_n <- Bcru_n*exp(-1.96*cvBcru_n); obsS95s_n <-Bcru_n*exp(1.96*cvBcru_n)
#Desembarques
p3 <- ggplot(myd_nor, aes(x=yrs, y=desem, fill=Periodo)) +
geom_bar(stat="identity", colour="NA") +
scale_fill_manual(values=c("dodgerblue3","gold2")) +
xlab('Años') + ylab('Desembarque (ton)') +
theme(legend.title=element_blank()) +
scale_x_continuous(breaks=round(seq(min(myd_nor$yrs), max(myd_nor$yrs), by = 3),1)) +
scale_y_continuous(breaks=round(seq(0, 4000, by = 500),1)) +
theme_bw() + theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(), axis.text=element_text(size=10),legend.position = 'bottom')
#theme(legend.position = 'bottom', panel.grid.major = element_blank(), axis.text=element_text(size=10))
#theme(panel.background = element_rect(fill = "transparent"),legend.position = 'bottom')
p3
#ggsave(p3, file='Figs/Fig1_Desem_LAmNor.png', width=7.5, height=5, dpi=300)
# op<-par(no.readonly=TRUE)
# ps.options(horizontal=F,bg="white",onefile=FALSE,paper="special")
# postscript("Figs/Fig1.eps",height=5, width=7.5)
# p1
# dev.off()
p3
p3 <- ggplot(myd_nor, aes(x=yrs, y=desem, fill=Periodo)) +
geom_bar(stat="identity", colour="NA") +
scale_fill_manual(values=c("dodgerblue3","gold2")) +
xlab('Años') + ylab('Desembarque (ton)') +
theme(legend.title=element_blank()) +
scale_x_continuous(breaks=round(seq(min(myd_nor$yrs), max(myd_nor$yrs), by = 3),1)) +
scale_y_continuous(breaks=round(seq(0, 4000, by = 500),1)) +
theme_bw() + theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(), axis.text=element_text(size=10),legend.position = 'bottom')
p3
#Desembarques
p3 <- ggplot(myd_nor, aes(x=yrs, y=desem, fill=Periodo)) +
geom_bar(stat="identity", colour="NA") +
scale_fill_manual(values=c("dodgerblue3","gold2")) +
xlab('Años') + ylab('Desembarque (ton)') +
theme(legend.title=element_blank()) +
scale_x_continuous(breaks=round(seq(min(myd_nor$yrs), max(myd_nor$yrs), by = 3),1)) +
scale_y_continuous(breaks=round(seq(0, 4000, by = 500),1)) +
theme_bw() + theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(), axis.text=element_text(size=10),legend.position = 'bottom')
#theme(legend.position = 'bottom', panel.grid.major = element_blank(), axis.text=element_text(size=10))
#theme(panel.background = element_rect(fill = "transparent"),legend.position = 'bottom')
p3
ggsave(p3, file='Figs/Fig1_Desem_LAmNor.png', width=7.5, height=5, dpi=300)
# op<-par(no.readonly=TRUE)
# ps.options(horizontal=F,bg="white",onefile=FALSE,paper="special")
# postscript("Figs/Fig1.eps",height=5, width=7.5)
# p1
# dev.off()
View(p3)
View(p3)
# DATOS SUR
# ============================================================================== #
yrs_s     <- dat_sur$Ind[,1]
years_s   <- dat_sur$Ind[,1]
nyrs_s    <- length(yrs_s)
age_s     <- dat_sur$edades
nage_s    <- dat_sur$nages
ntalla_s  <- dat_sur$ntallas
tallas_s  <- dat_sur$tallas
#Indices
mydat_sur <-  dat_sur$Ind[,c(1,2,3,4,5)] ; mydat_sur[mydat_sur==0] <- NA
myd_sur   <-  data.frame(mydat_sur)
myd_sur$periodo <- c(rep('B', 22), rep('C',19))
# DATOS SUR
# ============================================================================== #
yrs_s     <- dat_sur$Ind[,1]
years_s   <- dat_sur$Ind[,1]
nyrs_s    <- length(yrs_s)
age_s     <- dat_sur$edades
nage_s    <- dat_sur$nages
ntalla_s  <- dat_sur$ntallas
tallas_s  <- dat_sur$tallas
#Indices
mydat_sur <-  dat_sur$Ind[,c(1,2,3,4,5)] ; mydat_sur[mydat_sur==0] <- NA
myd_sur   <-  data.frame(mydat_sur)
myd_sur$periodo <- c(rep('A', 22), rep('B',20))
names <-  c('yrs', 'desem','cpue','Bcru','ph','Periodo')
colnames(myd_sur) <- names
#Observado
cpue_s <- myd_sur$cpue; cpue_s[cpue_s <= 0.01]   <-NA
Bcru_s <- myd_sur$Bcru ; Bcru_s[Bcru_s <= 1]  <-NA
# Confidence Intervals
cvcpue_s        <- rep(0.15,nyrs_s)
cvBcru_s        <- rep(0.30,nyrs_s)
obsC95i_s <- cpue_s*exp(-1.96*cvcpue_s); obsC95s_s <-cpue_s*exp(1.96*cvcpue_s)
obsS95i_s <- Bcru_s*exp(-1.96*cvBcru_s); obsS95s_s <-Bcru_s*exp(1.96*cvBcru_s)
View(myd_sur)
years_s
mydat_sur
myd_sur$desem
myd_nor$desem
land<-data.frame(years_s, sum(myd_nor$desem,myd_sur$desem),myd_sur$Periodo)
land
View(land)
land<-data.frame(years_s, c(sum(myd_nor$desem,myd_sur$desem)),myd_sur$Periodo)
View(land)
sum(myd_nor$desem,myd_sur$desem)
sum(myd_nor$desem,myd_sur$desem)
myd_nor$desem
sum(myd_nor$desem,myd_sur$desem)
c(2,3)
c(2,3),c(2,3)
data.frame(c(2,3),c(2,3))
a <- c(2,3)
b <- c(2,3)
data.frame(a,b)
c <- data.frame(a,b)
c
sum(c$a,c$b)
b <- c(2,NA)
c <- data.frame(a,b)
sum(c$a,c$b)
rm(a,b,c)
a
b
c
mydat_nor[mydat_nor==NA] <- 0
mydat_sur[mydat_sur==NA] <- 0
mydat_nor
# DATOS NORTE
# ============================================================================== #
yrs_n  <- dat_nor$Ind[,1]
years_n  <- dat_nor$Ind[,1]
nyrs_n <- length(yrs_n)
age_n    <- dat_nor$edades
nage_n   <- dat_nor$nages
ntalla_n  <- dat_nor$ntallas
tallas_n <- dat_nor$tallas
#Indices
mydat_nor <-  dat_nor$Ind[,c(1,2,3,4,5)] #; mydat_nor[mydat_nor==0] <- NA
myd_nor   <-  data.frame(mydat_nor)
myd_nor$periodo <- c(rep('A', 22), rep('B',20))
names <-  c('yrs', 'desem','cpue','Bcru','ph','Periodo')
colnames(myd_nor) <- names
#Observado
cpue_n <- myd_nor$cpue; cpue_n[cpue_n <= 0.01]   <-NA
Bcru_n <- myd_nor$Bcru ; Bcru_n[Bcru_n <= 1]  <-NA
# Confidence Intervals
cvcpue_n        <- rep(0.15,nyrs_n)
cvBcru_n        <- rep(0.30,nyrs_n)
obsC95i_n <- cpue_n*exp(-1.96*cvcpue_n); obsC95s_n <-cpue_n*exp(1.96*cvcpue_n)
obsS95i_n <- Bcru_n*exp(-1.96*cvBcru_n); obsS95s_n <-Bcru_n*exp(1.96*cvBcru_n)
# DATOS SUR
# ============================================================================== #
yrs_s     <- dat_sur$Ind[,1]
years_s   <- dat_sur$Ind[,1]
nyrs_s    <- length(yrs_s)
age_s     <- dat_sur$edades
nage_s    <- dat_sur$nages
ntalla_s  <- dat_sur$ntallas
tallas_s  <- dat_sur$tallas
#Indices
mydat_sur <-  dat_sur$Ind[,c(1,2,3,4,5)] #; mydat_sur[mydat_sur==0] <- NA
myd_sur   <-  data.frame(mydat_sur)
myd_sur$periodo <- c(rep('A', 22), rep('B',20))
names <-  c('yrs', 'desem','cpue','Bcru','ph','Periodo')
colnames(myd_sur) <- names
#Observado
cpue_s <- myd_sur$cpue; cpue_s[cpue_s <= 0.01]   <-NA
Bcru_s <- myd_sur$Bcru ; Bcru_s[Bcru_s <= 1]  <-NA
# Confidence Intervals
cvcpue_s        <- rep(0.15,nyrs_s)
cvBcru_s        <- rep(0.30,nyrs_s)
obsC95i_s <- cpue_s*exp(-1.96*cvcpue_s); obsC95s_s <-cpue_s*exp(1.96*cvcpue_s)
obsS95i_s <- Bcru_s*exp(-1.96*cvBcru_s); obsS95s_s <-Bcru_s*exp(1.96*cvBcru_s)
land<-data.frame(years_s, c(sum(myd_nor$desem,myd_sur$desem)), myd_sur$Periodo)
land
View(land)
sum(myd_nor$desem,myd_sur$desem)
land<-data.frame(years_s, c(myd_nor$desem + myd_sur$desem), myd_sur$Periodo)
land
land
myd_nor$desem
myd_sur$desem
names <-  c('yrs', 'desem', 'Periodo')
land
head(land,10)
